# marking_hack_backend
Marking Hack 2023. Система управления товарами на основе данных «Честного знака»

- Сайт хакатона: [hack.markirovka.ru](https://hack.markirovka.ru/)
- Команда: *infinf*
- Время на решение задачи: 40 часов

## Задача
> Разработать продукт для эффективного управления товарными запасами, дистрибуцией 
и продажами бизнеса, используя данные из системы маркировки.

## Результат
Был разработан прототип issue-tracker приложения для розничных продавцов,
которое рассчитывает процент прибыли и убытка на основании исторических данных.

В рамках хакатона, за ограниченное время было реализовано отслеживание запасов товара:
- Вычисление средней тенденции продажи товаров в день
- Расчет среднего количества товаров, которое могло бы быть продано за актуальные дни
- Предсказание прибыли/убытков и получение сигнальных уведомлений

Также есть возможность расширять issue-tracker другими уведомлениями для бизнеса.

Датасеты были загружены в БД PostgreSQL, донасыщены необходимыми данными и обработаны на стороне базы.
Есть возможность интеграции со сторонними системами через API или загрузку csv.

Фронт: https://github.com/inf-inf/marking_hack_front

Менеджер имеет возможность просматривать все точки продажи на карте (интеграция с 2гис), 
выбирать точки, для которых необходимо провести закупку (сервис предоставляет 
расчетное время до окончания запасов), и генерировать PDF отчет, документ на закупку.

## Установка проекта

Клонировать репозиторий:

```shell
git clone https://github.com/inf-inf/marking_hack_backend.git
```
Создать виртуальное окружение:

```shell
python -m venv venv
```
Установить необходимые библиотеки:

```shell
source venv/bin/activate
pip install -r requirements.txt
```

Установить wkhtmltopdf:

```shell
apt install wkhtmltopdf
```

Определить переменные окружения:

```shell
DADATA_API_KEY=<dadata api key>
SQLALCHEMY_DATABASE_URL=postgresql+psycopg2://<username>:<password>@<host>:<port>/<database>
```

Для Windows также нужно указать путь до бинарника wkhtmltopdf
```shell
WKHTMLTOPDF_PATH=D:\Program Files\wkhtmltopdf\bin\wkhtmltopdf.exe
```

Запуск
```shell
uvicorn main:app --reload
```
либо
```shell
python main.py
```
